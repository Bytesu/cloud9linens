!function(){var e={2136:function(e,t,i){"use strict";i.d(t,{Z:function(){return a}});var s=i(4942),n=i(8971),o=i(2870),l=i(2627);class r{constructor(e,t=this.defaultOptions){(0,s.Z)(this,"defaultOptions",{presetContentHeight:!1,duration:300,callback(){}}),(0,s.Z)(this,"selectors",{items:[".sf__accordion-item"],buttons:[".sf__accordion-button"],contents:[".sf__accordion-content"]}),(0,s.Z)(this,"openClass","open"),(0,s.Z)(this,"initClass","acc-initialized"),(0,s.Z)(this,"removeEvents",null),(0,s.Z)(this,"destroy",()=>{this.removeEvents(),window.removeEventListener("resize",this.debouncedSetContentHeight)}),(0,s.Z)(this,"setContentOpacity",()=>{this.domNodes.contents.forEach(e=>e.style.opacity=1)}),(0,s.Z)(this,"setItemOverflowState",()=>{var e,t;null===(e=this.domNodes)||void 0===e||null===(t=e.items)||void 0===t||t.forEach((e,t)=>{var i,s,n,o,l,r;let a=null===(i=this.domNodes)||void 0===i||null===(s=i.contents)||void 0===s?void 0:s[t],c=null!=e&&null!==(n=e.classList)&&void 0!==n&&null!==(o=n.contains)&&void 0!==o&&o.call(n,this.openClass)?"remove":"add";null==a||null===(l=a.classList)||void 0===l||null===(r=l[c])||void 0===r||r.call(l,"overflow-hidden")})}),(0,s.Z)(this,"setContentHeight",()=>{this.domNodes=(0,o.zt)(this.selectors,this.container);let{items:e,contents:t}=this.domNodes;e.forEach((e,i)=>{var s,n,o,l,r,a;if(null!=e&&e.classList.contains(this.openClass)){null==e||null===(o=e.style)||void 0===o||o.setProperty("--content-max-height","auto");let c=null==t||null===(l=t[i])||void 0===l?void 0:l.scrollHeight;null==e||null===(r=e.style)||void 0===r||r.setProperty("--content-max-height",`${c}px`)}else null==e||null===(a=e.style)||void 0===a||a.setProperty("--content-max-height",0);null==t||null===(s=t[i])||void 0===s||null===(n=s.classList)||void 0===n||n.add("max-height-set")}),this.setItemOverflowState(),this.setContentOpacity()}),(0,s.Z)(this,"toggle",e=>{var t,i,s,n,o,l,r,a,c,d;let u=null===(t=this.domNodes)||void 0===t||null===(i=t.items)||void 0===i?void 0:i[e],h=null===(s=this.domNodes)||void 0===s||null===(n=s.contents)||void 0===n?void 0:n[e],m=null==u||null===(o=u.classList)||void 0===o?void 0:o.contains(this.openClass);null==u||null===(l=u.classList)||void 0===l||l.toggle(this.openClass);let f=m?0:null===(r=this.domNodes)||void 0===r||null===(a=r.contents)||void 0===a||null===(c=a[e])||void 0===c?void 0:c.scrollHeight;(null==u||u.style.setProperty("--content-max-height",`${f}px`),m)?null==h||null===(d=h.classList)||void 0===d||d.add("overflow-hidden"):setTimeout(()=>{var e;null==h||null===(e=h.classList)||void 0===e||e.remove("overflow-hidden")},350)}),e&&!e.classList.contains(this.initClass)&&(this.container=e,this.domNodes=(0,o.zt)(this.selectors,this.container),this.options=Object.assign({},this.defaultOptions,t),this.debouncedSetContentHeight=(0,l.D)(this.setContentHeight.bind(this),300),this.init())}init(){var e,t;null===(e=this.container)||void 0===e||null===(t=e.style)||void 0===t||t.setProperty("--duration",` ${this.options.duration}ms`),this.removeEvents=(0,n.X)({context:this.container,selector:this.selectors.buttons[0],handler:(e,t)=>{t.classList.add("pointer-events-none");let i=this.domNodes.buttons.indexOf(t);this.toggle(i),setTimeout(()=>{t.classList.remove("pointer-events-none")},350)}}),this.options.presetContentHeight?window.requestAnimationFrame(this.setContentHeight):(this.setItemOverflowState(),this.setContentOpacity()),window.addEventListener("resize",this.debouncedSetContentHeight),"function"==typeof this.options.callback&&this.options.callback(),this.container.classList.add(this.initClass)}}class a{constructor(){(0,s.Z)(this,"selectedTags",new Set),(0,s.Z)(this,"currentPage",1),(0,s.Z)(this,"innerWidth",window.innerWidth),(0,s.Z)(this,"selectors",{section:'[data-section-type="collection-template"]',collectionContainer:".sf__collection-container",sidebar:".sf__sidebar",openSidebar:".sf__sidebar-open",closeSidebar:".sf__sidebar-close",sidebarContent:".sf__sidebar-content",sidebarWrapper:".sf__sidebar-wrapper",filterWrapper:".sf__filter-wrapper",tagsFilter:"[data-tags-filter]",mbSortIcon:".sf__sortmb-icon",mbSortWrapper:".sf__sortmb-wrapper",mbSortList:".sf__sortmb-list",mbSortListItems:[".sf__sortmb-list li"],mbSortListItemActive:".sf__sortmb-list li.active",mbSortCloseIcon:".sf__hidden-sortmb"}),(0,s.Z)(this,"initSidebarFilter",()=>{let{sidebar:e,filterWrapper:t}=this.domNodes;if(e&&t){this.accs&&this.accs.destroy();let i=this.setPresetContentHeight();t.classList.remove("acc-initialized"),this.accs=new r(t,{presetContentHeight:i,callback:()=>t.classList.add("opacity-100")})}this.toggleSidebarFilter(),window.addEventListener("resize",()=>{this.innerWidth=window.innerWidth,this.responsiveSidebar()})}),(0,s.Z)(this,"setPresetContentHeight",()=>{var e;let t=!0,i=null===(e=this.domNodes.sidebar)||void 0===e?void 0:e.dataset.type;return this.innerWidth<1280?t=!1:this.innerWidth>1279&&"fixed"!==i?t=!0:"fixed"===i&&(t=!1),t}),(0,s.Z)(this,"responsiveSidebar",()=>{var e,t,i,s;let n=null===(e=this.domNodes.sidebar)||void 0===e?void 0:e.dataset.type;"leftColumn"!==n&&"rightColumn"!==n||(this.innerWidth>1279?null===(t=this.domNodes.sidebar)||void 0===t||t.style.removeProperty("display"):(null===(i=this.domNodes.sidebar)||void 0===i||i.style.setProperty("display","none"),null===(s=this.domNodes.sidebar)||void 0===s||s.style.setProperty("--tw-bg-opacity","0")))}),(0,s.Z)(this,"toggleSidebarFilter",()=>{let{section:e,sidebar:t,openSidebar:i,closeSidebar:s}=this.domNodes;null==i||i.addEventListener("click",t=>{t.preventDefault(),this.openSidebarFilter(),e.classList.add("sidebar-open"),document.documentElement.classList.add("prevent-scroll")}),null==s||s.addEventListener("click",this.closeSidebarFilter),null==t||t.addEventListener("click",i=>{i.target===t&&(this.closeSidebarFilter(),e.classList.remove("sidebar-open"),document.documentElement.classList.remove("prevent-scroll"))})}),(0,s.Z)(this,"openSidebarFilter",()=>{let{sidebar:e,sidebarContent:t}=this.domNodes;null==e||e.style.setProperty("display","block"),setTimeout(()=>{var i;null==e||e.style.setProperty("--tw-bg-opacity","0.5"),null==t||t.style.setProperty("--tw-translate-x","0"),null===(i=this.accs)||void 0===i||i.setContentHeight()},50)}),(0,s.Z)(this,"closeSidebarFilter",()=>{let{sidebar:e,sidebarContent:t}=this.domNodes,i=e.dataset.type;(this.innerWidth<1280||"fixed"===i)&&(null==e||e.style.setProperty("--tw-bg-opacity","0"),null==t||t.style.setProperty("--tw-translate-x","-100%"),document.documentElement.classList.remove("prevent-scroll"),setTimeout(()=>{null==e||e.style.setProperty("display","none")},200))}),(0,s.Z)(this,"initSortbyMobile",()=>{(0,n.X)({selector:this.selectors.mbSortIcon,handler:this.openSortByMobile}),document.body.addEventListener("click",this.handleSortWrapperClick);let e=this.domNodes.mbSortListItemActive;(0,n.X)({selector:this.selectors.mbSortListItems[0],handler:(t,i)=>{if(i!==e){var s,n,o,l,r;null===(s=e)||void 0===s||null===(n=s.classList)||void 0===n||null===(o=n.remove)||void 0===o||o.call(n,"active"),i.classList.add("active"),e=i,this.closeSortByMobile();let a=i.dataset.value;a&&(null===(l=window.spratlyTheme)||void 0===l||null===(r=l.CollectionTagsFilters)||void 0===r||r._onSorting(a));let c=document.querySelector("[data-form-sortby] select");c&&(c.selectedIndex=i.dataset.index,c.closest("form").dispatchEvent(new Event("input")))}}})}),(0,s.Z)(this,"openSortByMobile",()=>{let{mbSortWrapper:e,mbSortList:t}=this.domNodes;null==e||e.style.setProperty("display","block"),setTimeout(()=>{document.documentElement.classList.add("overflow-hidden"),null==e||e.style.setProperty("--tw-bg-opacity","0.5"),null==t||t.style.setProperty("--tw-translate-y","0")},200)}),(0,s.Z)(this,"closeSortByMobile",e=>{let{mbSortWrapper:t,mbSortList:i}=this.domNodes;null==t||t.style.setProperty("--tw-bg-opacity","0"),null==i||i.style.setProperty("--tw-translate-y","100%"),document.documentElement.classList.remove("overflow-hidden"),setTimeout(()=>{null==t||t.style.setProperty("display","none")},200)}),(0,s.Z)(this,"handleSortWrapperClick",e=>{var t,i,s;let n=null===(t=e.target)||void 0===t?void 0:t.closest(this.selectors.mbSortList),o=null===(i=e.target)||void 0===i?void 0:i.closest(this.selectors.mbSortIcon),l=null===(s=e.target)||void 0===s?void 0:s.closest(this.selectors.mbSortCloseIcon);(n||o)&&!l||this.closeSortByMobile()})}init(){this.queryDomNodes(),this.sectionId=this.domNodes.section.dataset.sectionId,this.initSortbyMobile(),window.requestAnimationFrame(this.initSidebarFilter)}queryDomNodes(){this.domNodes=(0,o.zt)(this.selectors)}}},6010:function(){class e extends HTMLElement{constructor(){super(),this.querySelector("a").addEventListener("click",e=>{(this.closest("collection-filters-form")||document.querySelector("collection-filters-form"))&&(e.preventDefault(),(this.closest("collection-filters-form")||document.querySelector("collection-filters-form")).onActiveFilterClick(e))})}}customElements.define("facet-remove",e)},5626:function(){class e extends HTMLElement{constructor(){super(),this.querySelectorAll("input").forEach(e=>e.addEventListener("change",this.onRangeChange.bind(this))),this.setMinAndMaxValues()}onRangeChange(e){this.adjustToValidValues(e.currentTarget),this.setMinAndMaxValues()}setMinAndMaxValues(){let e=this.querySelectorAll("input"),t=e[0],i=e[1];i.value&&t.setAttribute("max",i.value),t.value&&i.setAttribute("min",t.value),""===t.value&&i.setAttribute("min",0),""===i.value&&t.setAttribute("max",i.getAttribute("max"))}adjustToValidValues(e){let t=Number(e.value),i=Number(e.getAttribute("min")),s=Number(e.getAttribute("max"));t<i&&(e.value=i),t>s&&(e.value=s)}}customElements.define("price-range",e)},6295:function(e,t,i){"use strict";i.r(t),i(2422),t.default=new class{constructor(){return this.component=this.component.bind(this),this.component}component(e,t,...i){if("function"==typeof e)return e({...t,children:i});i&&(i=i.filter(e=>null!==e)),t&&(t.class&&(t.className=t.class),delete t.children);let s="fragment"!==e?function(e,t){t=t||{};let i=document.createElement(e);try{i=Object.assign(i,t)}catch{let s=Object.keys(t);for(let n=0;n<s.length;n++)"dataSet"!==t[n]&&i.setAttribute(s[n],t[s[n]])}return i}(e,t):document.createDocumentFragment();if(-1!==["svg","path","rect","text","circle","g"].indexOf(e))for(let n in s=document.createElementNS("http://www.w3.org/2000/svg",e),t){let o="className"===n?"class":n;s.setAttribute(o,t[n])}for(let l of i)Array.isArray(l)?s.append(...l):s.append(l);if(null!=t&&t.dataSet)for(let r in t.dataSet)Object.prototype.hasOwnProperty.call(t.dataSet,r)&&(s.dataset[r]=t.dataSet[r]);return t&&!window.__aleartedJSXData&&Object.keys(t).find(e=>e.match(/^data-/))&&(alert("Do not use data-* in your JSX component! Use dataSet instead!! - Check the console.trace for more info"),window.__aleartedJSXData=!0),null!=t&&t.ref&&("function"==typeof t.ref?t.ref(s):t.ref=s),null!=t&&t.on&&Object.entries(t.on).forEach(([e,t])=>{s.addEventListener(e,t)}),null!=t&&t.style&&Object.entries(t.style).forEach(([e,t])=>{s.style.setProperty(e,t)}),s}}},2627:function(e,t,i){"use strict";function s(e,t=300){let i;return(...s)=>{clearTimeout(i),i=setTimeout(()=>e.apply(this,s),t)}}i.d(t,{D:function(){return s}})},8971:function(e,t,i){"use strict";i.d(t,{X:function(){return s}});let s=({context:e=document.documentElement,event:t="click",selector:i,handler:s,capture:n=!1})=>{let o=function(e){for(let t=e.target;t&&t!==this;t=t.parentNode)if(t.matches(i)){s.call(t,e,t);break}};return e.addEventListener(t,o,n),()=>{e.removeEventListener(t,o,n)}}},2870:function(e,t,i){"use strict";function s(e={},t=document){return Object.entries(e).reduce((e,[i,s])=>{var n;let o="string"==typeof s,l=o?s:s[0];return e[i]=null==t||null===(n=t[o?"querySelector":"querySelectorAll"])||void 0===n?void 0:n.call(t,l),!o&&e[i]&&(e[i]=[...e[i]]),e},{})}i.d(t,{zt:function(){return s}}),i(643),i(2837),i(6295).default,window.__getSectionInstanceByType=e=>window.Shopify.theme.sections.instances.find(t=>t.type===e),document.querySelector("#scroll-to-top-target")},2837:function(e,t,i){"use strict";let{themeScriptURLs:s,themeStyleURLs:n}=window},2422:function(){!function(){function e(){var e=Array.prototype.slice.call(arguments),t=document.createDocumentFragment();e.forEach(function(e){var i=e instanceof Node;t.appendChild(i?e:document.createTextNode(String(e)))}),this.appendChild(t)}[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach(function(t){t.hasOwnProperty("append")||Object.defineProperty(t,"append",{configurable:!0,enumerable:!0,writable:!0,value:e})})}()},643:function(e){var t="complete",i="canceled";function s(e,t,i){e.self===e?e.scrollTo(t,i):(e.scrollLeft=t,e.scrollTop=i)}function n(e){return e.self===e}function o(e){return"pageXOffset"in e||(e.scrollHeight!==e.clientHeight||e.scrollWidth!==e.clientWidth)&&"hidden"!==getComputedStyle(e).overflow}function l(){return!0}function r(e){if(e.assignedSlot)return r(e.assignedSlot);if(e.parentElement)return"BODY"===e.parentElement.tagName?e.parentElement.ownerDocument.defaultView||e.parentElement.ownerDocument.ownerWindow:e.parentElement;if(e.getRootNode){var t=e.getRootNode();if(11===t.nodeType)return t.host}}e.exports=function(e,a,c){if(e){"function"==typeof a&&(c=a,a=null),a||(a={}),a.time=isNaN(a.time)?1e3:a.time,a.ease=a.ease||function(e){return 1-Math.pow(1-e,e/2)},a.align=a.align||{};var d=r(e),u=1,h=a.validTarget||l,m=a.isScrollable;a.debug;for(var f=[];d;)if(a.debug,h(d,u)&&(m?m(d,o):o(d))&&(u++,f.push(d)),!(d=r(d))){p(t);break}return f.reduce((o,l,r)=>(function(e,o,l,r,a){var c,d=!o._scrollSettings,u=o._scrollSettings,h=Date.now(),m={passive:!0};function f(e){o._scrollSettings=null,o.parentElement&&o.parentElement._scrollSettings&&o.parentElement._scrollSettings.end(e),l.debug,a(e),c&&(o.removeEventListener("touchstart",c,m),o.removeEventListener("wheel",c,m))}u&&u.end(i);var p=l.maxSynchronousAlignments;return null==p&&(p=3),o._scrollSettings={startTime:h,endIterations:0,target:e,time:l.time,ease:l.ease,align:l.align,isWindow:l.isWindow||n,maxSynchronousAlignments:p,end:f,scrollAncestor:r},"cancellable"in l&&!l.cancellable||(c=f.bind(null,i),o.addEventListener("touchstart",c,m),o.addEventListener("wheel",c,m)),d&&function e(i){var n=i._scrollSettings;if(n){var o=n.maxSynchronousAlignments,l=function(e,t){var i,s,n,o,l,r,a,c=e.align,d=e.target.getBoundingClientRect(),u=c&&null!=c.left?c.left:.5,h=c&&null!=c.top?c.top:.5,m=c&&null!=c.leftOffset?c.leftOffset:0,f=c&&null!=c.topOffset?c.topOffset:0,p=u,v=h;if(e.isWindow(t))r=Math.min(d.width,t.innerWidth),a=Math.min(d.height,t.innerHeight),s=d.left+t.pageXOffset-t.innerWidth*p+r*p,n=d.top+t.pageYOffset-t.innerHeight*v+a*v,s-=m,n-=f,s=e.align.lockX?t.pageXOffset:s,n=e.align.lockY?t.pageYOffset:n,o=s-t.pageXOffset,l=n-t.pageYOffset;else{r=d.width,a=d.height,i=t.getBoundingClientRect();var g=d.left-(i.left-t.scrollLeft),y=d.top-(i.top-t.scrollTop);s=g+r*p-t.clientWidth*p,n=y+a*v-t.clientHeight*v,s-=m,n-=f,s=Math.max(Math.min(s,t.scrollWidth-t.clientWidth),0),n=Math.max(Math.min(n,t.scrollHeight-t.clientHeight),0),s=e.align.lockX?t.scrollLeft:s,n=e.align.lockY?t.scrollTop:n,o=s-t.scrollLeft,l=n-t.scrollTop}return{x:s,y:n,differenceX:o,differenceY:l}}(n,i),r=Date.now()-n.startTime,a=Math.min(1/n.time*r,1);if(n.endIterations>=o)return s(i,l.x,l.y),i._scrollSettings=null,n.end(t);var c=1-n.ease(a);if(s(i,l.x-l.differenceX*c,l.y-l.differenceY*c),r>=n.time)return n.endIterations++,n.scrollAncestor&&e(n.scrollAncestor),void e(i);!function(e){if("requestAnimationFrame"in window)return window.requestAnimationFrame(e);setTimeout(e,16)}(e.bind(null,i))}}(o),c})(e,l,a,f[r+1],p),null)}function p(e){--u||c&&c(e)}}},4942:function(e,t,i){"use strict";function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,{Z:function(){return s}})}},t={};function i(s){var n=t[s];if(void 0!==n)return n.exports;var o=t[s]={exports:{}};return e[s](o,o.exports,i),o.exports}i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,{a:t}),t},i.d=function(e,t){for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";var e=i(4942),t=i(2627);class s{constructor(t,i={}){(0,e.Z)(this,"selectors",{loadingBar:"al-loading-bar",loadingOverlay:"al-loading-overlay"}),(0,e.Z)(this,"defaultOptions",{overlay:null,thickness:"3px",color:"gray",startDuration:1e3,finishDuration:300}),this.options=Object.assign({},this.defaultOptions,i),this.target=t,this.overlay=this.options.overlay||this.target,this.cleanUp=this.cleanUp.bind(this),this.setLoadingData()}setLoadingData(){let{overlay:e,options:{startDuration:t,finishDuration:i,thickness:s,color:n}}=this;e.style.setProperty("--al-thickness",` ${s}`),e.style.setProperty("--al-color",` ${n}`),e.style.setProperty("--al-start-duration",` ${t}ms`),e.style.setProperty("--al-finish-duration",` ${i}ms`)}start(){this.target.classList.add(this.selectors.loadingBar,"start","loading"),this.overlay.classList.add(this.selectors.loadingOverlay,"overlay-show")}finish(e=()=>{}){let{target:t,overlay:i,cleanUp:s,options:{finishDuration:n}}=this,o=window.getComputedStyle(t,":before").width;t.style.setProperty("--al-end-width",o),t.classList.add("loaded"),t.classList.remove("loading"),setTimeout(()=>{t.classList.add("finished"),i.classList.remove("overlay-show")},50),setTimeout(s,2*n),setTimeout(e,n)}cleanUp(){this.target.classList.remove(this.selectors.loadingBar,"start","loaded","finished"),this.overlay.classList.remove(this.selectors.loadingOverlay)}}i(5626),i(6010);var n={};function o(e,t){t=t||{};var i,s,o,r,a=(i=e,Array.prototype.slice.call(i.querySelectorAll("[tabindex],[draggable],a[href],area,button:enabled,input:not([type=hidden]):enabled,object,select:enabled,textarea:enabled")).filter(function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)})),c=t.elementToFocus||e,d=a[0],u=a[a.length-1];l(),n.focusin=function(t){e===t.target||e.contains(t.target)||d.focus(),t.target!==e&&t.target!==u&&t.target!==d||document.addEventListener("keydown",n.keydown)},n.focusout=function(){document.removeEventListener("keydown",n.keydown)},n.keydown=function(t){9!==t.keyCode||(t.target!==u||t.shiftKey||(t.preventDefault(),d.focus()),(t.target===e||t.target===d)&&t.shiftKey&&(t.preventDefault(),u.focus()))},document.addEventListener("focusout",n.focusout),document.addEventListener("focusin",n.focusin),s=c,o=(o=t)||{},r=s.tabIndex,s.tabIndex=-1,s.dataset.tabIndex=r,s.focus(),void 0!==o.className&&s.classList.add(o.className),s.addEventListener("blur",function e(t){t.target.removeEventListener(t.type,e),s.tabIndex=r,delete s.dataset.tabIndex,void 0!==o.className&&s.classList.remove(o.className)})}function l(){document.removeEventListener("focusin",n.focusin),document.removeEventListener("focusout",n.focusout),document.removeEventListener("keydown",n.keydown)}class r extends HTMLElement{constructor(){super(),this.mainDetailsToggle=this.querySelector("details");let e=this.querySelectorAll("summary");this.addAccessibilityAttributes(e),"iPhone"===navigator.platform&&document.documentElement.style.setProperty("--viewport-height",`${window.innerHeight}px`),this.addEventListener("keyup",this.onKeyUp.bind(this)),this.addEventListener("focusout",this.onFocusOut.bind(this)),this.bindEvents()}bindEvents(){this.querySelectorAll("summary").forEach(e=>e.addEventListener("click",this.onSummaryClick.bind(this))),this.querySelectorAll("button").forEach(e=>e.addEventListener("click",this.onCloseButtonClick.bind(this)))}addAccessibilityAttributes(e){e.forEach(e=>{e.setAttribute("role","button"),e.setAttribute("aria-expanded",!1),e.setAttribute("aria-controls",e.nextElementSibling.id)})}onKeyUp(e){if("ESCAPE"!==e.code.toUpperCase())return;let t=e.target.closest("details[open]");t&&(t===this.mainDetailsToggle?this.closeMenuDrawer(this.mainDetailsToggle.querySelector("summary")):this.closeSubmenu(t))}onSummaryClick(e){let t=e.currentTarget,i=t.parentNode,s=i.hasAttribute("open");i===this.mainDetailsToggle?(s&&e.preventDefault(),s?this.closeMenuDrawer(t):this.openMenuDrawer(t)):(o(t.nextElementSibling,i.querySelector("button")),setTimeout(()=>{i.classList.add("menu-opening")}))}openMenuDrawer(e){setTimeout(()=>{this.mainDetailsToggle.classList.add("menu-opening")}),e.setAttribute("aria-expanded",!0),o(this.mainDetailsToggle,e),document.body.classList.add(`overflow-hidden-${this.dataset.breakpoint}`)}closeMenuDrawer(e,t=!1){void 0!==e&&(this.mainDetailsToggle.classList.remove("menu-opening"),this.mainDetailsToggle.querySelectorAll("details").forEach(e=>{e.removeAttribute("open"),e.classList.remove("menu-opening")}),this.mainDetailsToggle.querySelector("summary").setAttribute("aria-expanded",!1),document.body.classList.remove(`overflow-hidden-${this.dataset.breakpoint}`),l(),this.closeAnimation(this.mainDetailsToggle))}onFocusOut(e){setTimeout(()=>{this.mainDetailsToggle.hasAttribute("open")&&!this.mainDetailsToggle.contains(document.activeElement)&&this.closeMenuDrawer()})}onCloseButtonClick(e){let t=e.currentTarget.closest("details");this.closeSubmenu(t)}closeSubmenu(e){e.classList.remove("menu-opening"),l(),this.closeAnimation(e)}closeAnimation(e){let t,i=s=>{void 0===t&&(t=s),s-t<400?window.requestAnimationFrame(i):(e.removeAttribute("open"),e.closest("details[open]")&&o(e.closest("details[open]"),e.querySelector("summary")))};window.requestAnimationFrame(i)}}function a(e){var t,i,s,n,o,l=[];for(t=document.getElementsByClassName("select-items"),i=document.getElementsByClassName("select-selected"),n=t.length,o=i.length,s=0;s<o;s++)e==i[s]?l.push(s):i[s].classList.remove("select-arrow-active");for(s=0;s<n;s++)l.indexOf(s)&&t[s].classList.add("select-hide")}customElements.define("menu-drawer",r),document.addEventListener("click",a);var c=i(643),d=i.n(c),u=i(2136);let h={leftColumn:"#CollectionProductGrid",rightColumn:"#CollectionProductGrid",fixed:'[data-section-type="collection-template"]',mobile:'[data-section-type="collection-template"]'};class m extends HTMLElement{constructor(){var i;super(),(0,e.Z)(this,"screen",""),(0,e.Z)(this,"setLoadingTarget",()=>{let e=window.innerWidth<768?"mobile":"desktop";e!==this.screen&&(this.loading=new s("mobile"===e?document.querySelector(h.mobile):document.querySelector(h[this.dataset.view])),this.screen=e)}),(0,e.Z)(this,"reInitEvents",()=>{var e;let t=window.spratlyTheme.Collection;t&&t.init(!0),null===(e=this.collectionFiltersInstance)||void 0===e||e.init(),window.spratlyTheme.Products.initProductForms({context:this.productGrid}).then(()=>{var e,i,s,n,o,l;null===(e=window)||void 0===e||null===(i=e.spratlyTheme)||void 0===i||null===(s=i.CompareProduct)||void 0===s||s.setCompareButtonsState(),null===(n=window)||void 0===n||null===(o=n.spratlyTheme)||void 0===o||null===(l=o.Wishlist)||void 0===l||l.setWishlistButtonsState(),function(e){let t,i,s,n,o,l,r,c,d,u,h;if(n=(t=e.getElementsByClassName("sf__custom-select")).length,t.length>0)for(i=0;i<n;i++){var m;for(o=(l=t[i].getElementsByTagName("select")[0]).length,(r=document.createElement("DIV")).setAttribute("class","select-selected"),(h=document.createElement("SPAN")).innerHTML=null===(m=l.options[l.selectedIndex])||void 0===m?void 0:m.innerHTML,t[i].appendChild(r),r.appendChild(h),(u=document.createElement("SPAN")).innerHTML='<svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M441.9 167.3l-19.8-19.8c-4.7-4.7-12.3-4.7-17 0L224 328.2 42.9 147.5c-4.7-4.7-12.3-4.7-17 0L6.1 167.3c-4.7 4.7-4.7 12.3 0 17l209.4 209.4c4.7 4.7 12.3 4.7 17 0l209.4-209.4c4.7-4.7 4.7-12.3 0-17z"/></svg>',u.setAttribute("class","select-arrow"),r.appendChild(u),(c=document.createElement("DIV")).setAttribute("class","select-items select-hide"),s=0;s<o;s++)(d=document.createElement("DIV")).innerHTML=l.options[s].innerHTML,l.options[s].getAttribute("selected")&&d.setAttribute("class","same-as-selected"),d.addEventListener("click",function(e){let t,i,s,n,o,l,r;for(l=(n=this.parentNode.parentNode.getElementsByTagName("select")[0]).length,o=this.parentNode.previousSibling,i=0;i<l;i++)if(n.options[i].innerHTML==this.innerHTML){for(n.selectedIndex=i,o.childNodes[0].innerHTML=this.innerHTML,r=(t=this.parentNode.getElementsByClassName("same-as-selected")).length,s=0;s<r;s++)t[s].removeAttribute("class");this.setAttribute("class","same-as-selected");break}n.dispatchEvent(new Event("change")),n.dispatchEvent(new Event("click")),o.click()}),c.appendChild(d);t[i].appendChild(c),r.addEventListener("click",function(e){e.stopPropagation(),a(this),this.nextSibling.classList.toggle("select-hide"),this.classList.toggle("select-arrow-active")})}}(t.domNodes.container)}).catch(console.error)}),(0,e.Z)(this,"renderSectionFromCache",async(e,t,i)=>{let s=this.filterData.find(e).html;this.renderFilters(s,t),this.renderProductGrid(s),"function"==typeof i&&i()}),this.filterData=[],this.onActiveFilterClick=this.onActiveFilterClick.bind(this),this.debouncedOnSubmit=(0,t.D)(e=>{this.onSubmitHandler(e)},500),this.querySelector("form").addEventListener("submit",this.debouncedOnSubmit.bind(this)),window.addEventListener("popstate",this.onHistoryChange.bind(this)),this.setLoadingTarget(),window.addEventListener("resize",(0,t.D)(this.setLoadingTarget,500)),this.collectionFiltersInstance=new u.Z,null===(i=this.collectionFiltersInstance)||void 0===i||i.init()}onSubmitHandler(e){e.preventDefault();let t=new FormData(e.target.closest("form")),i=new URLSearchParams(t).toString();this.renderPage(i,e)}onActiveFilterClick(e){e.preventDefault(),this.toggleActiveFacets(),this.renderPage(new URL(e.currentTarget.href).searchParams.toString())}onHistoryChange(e){var t;let i=(null===(t=e.state)||void 0===t?void 0:t.searchParams)||"";this.renderPage(i,null,!1)}toggleActiveFacets(e=!0){document.querySelectorAll(".js-facet-remove").forEach(t=>{t.classList.toggle("disabled",e)})}renderPage(e,t,i=!0){let s=this.getSections();s.forEach(i=>{let s=`${window.location.pathname}?section_id=${i.section}&${e}`,n=e=>e.url===s,o=()=>{this.reInitEvents(),this.loading.finish(()=>d()(document.getElementById("CollectionProductGrid"),{align:{topOffset:80}}))};this.filterData.some(n)?this.renderSectionFromCache(n,t,o):this.renderSectionFromFetch(s,t,o)}),i&&this.updateURLHash(e)}renderSectionFromFetch(e,t,i){fetch(e).then(e=>e.text()).then(s=>{let n=s;this.filterData=[...this.filterData,{html:n,url:e}],this.renderFilters(n,t),this.renderProductGrid(n),"function"==typeof i&&i()})}renderProductGrid(e){document.getElementById("CollectionProductGrid").innerHTML=new DOMParser().parseFromString(e,"text/html").getElementById("CollectionProductGrid").innerHTML}renderProductCount(e){}renderFilters(e,t){let i=new DOMParser().parseFromString(e,"text/html"),s=i.querySelectorAll("#CollectionFiltersForm .js-filter");Array.from(s).filter(e=>{var i,s;return(i=e).dataset.index!==(null==t||null===(s=t.target.closest(".js-filter"))||void 0===s?void 0:s.dataset.index)}).forEach(e=>{document.querySelector(`.js-filter[data-index="${e.dataset.index}"]`).innerHTML=e.innerHTML}),this.renderActiveFacets(i),this.renderAdditionalElements(i)}renderActiveFacets(e){[".active-facets-mobile",".active-facets-desktop"].forEach(t=>{let i=e.querySelector(t);i&&(document.querySelector(t).innerHTML=i.innerHTML)}),this.toggleActiveFacets(!1)}renderAdditionalElements(e){[".mobile-facets__open",".mobile-facets__count",".sorting"].forEach(t=>{e.querySelector(t)&&(document.querySelector(t).innerHTML=e.querySelector(t).innerHTML)})}renderCounts(e,t){[".count-bubble",".facets__selected"].forEach(i=>{let s=t.querySelector(i);e.querySelector(i)&&s&&(t.querySelector(i).outerHTML=e.querySelector(i).outerHTML)})}updateURLHash(e){history.pushState({searchParams:e},"",`${window.location.pathname}${e&&"?".concat(e)}`)}getSections(){return[{id:"main-collection-product-grid",section:document.getElementById("main-collection-product-grid").dataset.id}]}}customElements.define("collection-filters-form",m)}()}();